# Работа с Systemd

Примеры работ с sytemd и юнит файлами.

## Создание сервиса и таймера

В директории monitor находятся необходимые файлы с комментариями:

*monitor.service* сервис, который запускает необходимый нам скрипт

*monitor.timer* таймер, который раз в 30 секунд запускает сервис

*monitor.config* конфигурационный файл, который содержит необходимые нам переменные для нанего сервиса

*monitor.sh* наш скрипт для поиска ключевого слова

*access.log* лог файл для примера

## Создание нескольких экземпляров сервиса по шаблону

Дополним unit файл httpd изменив путь файла с переменными *EnvironmentFile=/etc/sysconfig/httpd_%i* добавив идентификатор *i%*, который позволяет передавать аргумент с помощью идентификатора *@*, который в свою очередь задается при запуске сервиса. 

Пример использования: Создадим для своего экземпляра сервиса свой файл с переменными */etc/sysconfig/httpd_001*, где как раз указываем путь к файлу с конфигурацией *OPTIONS=-f 001.conf*. Соответственно создаем файл с конфигурацией *001.conf* с необходимыми нам параметрами.

``
PidFile /var/run/httpd_001.pid
Listen 8080
``

Запускаем командой свой сервис *systemctl start httpd@001*.